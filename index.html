<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>Birthday Bounty</title>
        <link rel="stylesheet" href="styles/styles.css" />
        <link rel="stylesheet" href="styles/animations.css" />
        <link rel="stylesheet" href="styles/bootstrap.min.css" />
        <meta name=viewport content='width=1024'>
        <!-- Include Google APIS (Jquery, fonts, maps) -->
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
        <link href="https://fonts.googleapis.com/css?family=Didact+Gothic" rel="stylesheet">
        <link href="https://fonts.googleapis.com/css?family=Caveat+Brush" rel="stylesheet">
        <!-- Include the AngularJS library -->
        <script src="./scripts/angular.min.js"></script>
        <script src="./scripts/bootstrap.min.js"></script>

		<!-- Include the fav icons -->
		<link rel="apple-touch-icon" sizes="57x57" href="images/favicons/apple-icon-57x57.png">
		<link rel="apple-touch-icon" sizes="60x60" href="images/favicons/apple-icon-60x60.png">
		<link rel="apple-touch-icon" sizes="72x72" href="images/favicons/apple-icon-72x72.png">
		<link rel="apple-touch-icon" sizes="76x76" href="images/favicons/apple-icon-76x76.png">
		<link rel="apple-touch-icon" sizes="114x114" href="images/favicons/apple-icon-114x114.png">
		<link rel="apple-touch-icon" sizes="120x120" href="images/favicons/apple-icon-120x120.png">
		<link rel="apple-touch-icon" sizes="144x144" href="images/favicons/apple-icon-144x144.png">
		<link rel="apple-touch-icon" sizes="152x152" href="images/favicons/apple-icon-152x152.png">
		<link rel="apple-touch-icon" sizes="180x180" href="images/favicons/apple-icon-180x180.png">
		<link rel="icon" type="image/png" sizes="192x192"  href="images/favicons/android-icon-192x192.png">
		<link rel="icon" type="image/png" sizes="32x32" href="images/favicons/favicon-32x32.png">
		<link rel="icon" type="image/png" sizes="96x96" href="images/favicons/favicon-96x96.png">
		<link rel="icon" type="image/png" sizes="16x16" href="images/favicons/favicon-16x16.png">
		<link rel="manifest" href="images/favicons/manifest.json">
		<meta name="msapplication-TileColor" content="#ffffff">
		<meta name="msapplication-TileImage" content="/ms-icon-144x144.png">
		<meta name="theme-color" content="#ffffff">

		<!-- Inlcude Goolge Analytics -->
		<script>
		  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
		  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
		  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
		  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

		  ga('create', 'UA-92026212-1', 'auto');
		  ga('send', 'pageview');

		</script>

    </head>
    <body ng-app="BirthdayBountyApp">
        <div class="app-container" ng-controller="MainController">
            <div class="top-navigation-bar">
                <div class="logo-text">
                    BIRTHDAY<br/>BOUNTY
                </div>
                <img class="flag-icon" src="images/flag.svg">
                <div class="navigation-menu">
                    <!--<div>About</div>
                    <div>Change Birthday</div>-->
                </div>
            </div>
            <div ng-if="!dob" class="dob-splash">
                <!-- <div>Enter ye postcode:</div>
                    <input placeholder="Postcode" />-->
				<div class="splash-text">
					<h1>Ahoy there, matey!</h1>
					<h2>Enter your date of birth:</h2>
					<input class="input-field" id="dayField" placeholder="DD" ng-change="dobFieldChange('day')" ng-model="birthday.day"/>
					<input class="input-field" id="monthField" placeholder="MM" ng-change="dobFieldChange('month')" ng-model="birthday.month"/>
					<input class="input-field" id="yearField" placeholder="YYYY" ng-change="dobFieldChange('year')" ng-model="birthday.year"/>
					<br/>
					<div class="standard-button" ng-click="submitBirthday()">
						Plunder some Birthday Bounty!
					</div>
				</div>
            </div>
            <div ng-if="dob">
                <div class="birthday-summary-strip">
                    <div class="summary-text grow-appear">
                        <h2>Shiver me timbers!</h2>
						</span>Plunderin' between {{ getPlunderPeriodString() }} could earn you up to </span>
                        <h1>{{ getPlunderValue() | currency }}</h1>
                        <span>worth of free Birthday Bounty!</span>
                        <br>
                    </div>
                </div>
                <div class="content-wrapper">
                    <div class="bounty-summary-container">
                        <h4 ng-if="showFullMap">
						    Bounty Map
                        </h4>
                        <hr ng-if="showFullMap"/>
                        <div ng-if="showFullMap" class="bounty-map-container">
                            <div id="bountyMapContainer" class="bounty-map"></div>
                            <div class="plunder-options">
                                <div class="option-label">
                                    Bounty Types:
                                </div>
                                <div ng-repeat="bountyType in bountyTypes track by $index">
                                    <img ng-class="{ unselected: plunderOptions.includeTypes.indexOf(bountyType.id) === -1 }" class="bounty-type-icon toggle-bounty-type-button" ng-src="{{bountyType.iconPath}}" ng-click="toggleBountyType(bountyType.id)"/>
                                </div>
                            </div>
                            <a ng-click="toggleFullMap()" class="map-view-button standard-button">
                                Hide Full Map
                            </a>
                        </div>
                        <div class="bounty-summary">
							<div ng-if="!showFullMap" class="bounty-summary-map-mini">
                                <h4>
									Bounty Map
								</h4>
								<hr/>
								<div class="bounty-map-mini-container">
									<div id="bountyMapContainer" class="bounty-map"></div>
									<a ng-click="toggleFullMap()" class="map-view-button standard-button">
										Show Full Map
									</a>
								</div>
							</div>
                            <div class="bounty-summary-settings">
                                <h4>
									Bounty Filters
								</h4>
								<hr/>
                                <div class="settings-label">
                                    Search:
                                </div>
                                <div class="settings-input"> 
                                    <input type="text" ng-model="plunderOptions.searchString" placeholder="Enter search term..." />
                                </div>
                                <div class="settings-label">
                                    Bounty Types:
                                </div>
								<div class="settings-input">
									<div ng-repeat="bountyType in bountyTypes track by $index">
										<img ng-class="{ unselected: plunderOptions.includeTypes.indexOf(bountyType.id) === -1 }" class="bounty-type-icon toggle-bounty-type-button" ng-src="{{bountyType.iconPath}}" ng-click="toggleBountyType(bountyType.id)"/>
									</div>
								</div>
                                <div class="settings-label">
                                    Max Value Between:
                                </div>
								<div class="settings-input">
									<br/>
									<input type="checkbox" ng-model="plunderOptions.showUnknownValue">Show Bounty with unknown value<br>
								</div>
                                <div class="settings-label">
                                    Available Between:
                                </div>
								<div class="settings-input">
									<input type="date" ng-model="plunderOptions.dateStart"> and  
									<input type="date" ng-model="plunderOptions.dateFinish">
								</div>
                                <div class="settings-label">
                                    Claim Conditions:
                                </div>
								<div class="settings-input">
									<input type="checkbox" ng-model="plunderOptions.includeRegistrationReq">Online Registration<br>
									<input type="checkbox" ng-model="plunderOptions.includeIdentificationReq">Identification Required<br>
									<input type="checkbox" ng-model="plunderOptions.includeDigitalVoucherReq">Digital Voucher Required<br>
									<input type="checkbox" ng-model="plunderOptions.includePaperVoucherReq">Paper Voucher Required
								</div>
								<div class="settings-label">
									Show Me:
								</div>
								<div class="settings-input">
									<input type="radio" ng-model="plunderOptions.showMe" value="{{enums.showMe.All}}"> All Birthday Bounty<br>									
									<input type="radio" ng-model="plunderOptions.showMe" value="{{enums.showMe.NotPlundered}}"> Bounty I haven't plundered<br>
									<input type="radio" ng-model="plunderOptions.showMe" value="{{enums.showMe.Plundered}}"> Bounty I have plundered
                                </div>
                                <div class="settings-label">
                                    Sort By:
                                </div>
								<div class="settings-input">
									<select ng-model="plunderOptions.sortBy">
										<option value="{{enums.sorter.ValueHighLow}}">Max Value (High to Low)</option>
										<option value="{{enums.sorter.ValueLowHigh}}">Max Value (Low to High)</option>
										<option value="{{enums.sorter.AvailEarlyLate}}">Availability (Early to Late)</option>
										<option value="{{enums.sorter.AvailLateEarly}}">Availability (Late to Early)</option>
										<option value="{{enums.sorter.OrgNameAZ}}">Organisation Name (A-Z)</option>
									</select>
								</div>
                            </div>
							<div class="bounty-summary-plunder">
								<h4>
									My Bounty Plunder
								</h4>
								<hr/>
								<div ng-if="myPlunder && myPlunder.length > 1" ng-repeat="plunderBounty in getMyPlunder() track by $index">
									<div class="my-plunder-item">
                                        <div class="my-plunder-item-left">
                                            <b>{{ plunderBounty.organisation.name }}</b>
										    <br/>
										    {{ plunderBounty.title }}
                                            <br/>
                                        </div>
                                        <div class="my-plunder-item-right">
                                            {{ plunderBounty.maxValue | currency }}
                                        </div>				
									</div>
								</div>
                                <div class="my-plunder-item">
                                    <div class="my-plunder-item-left plunder-total">
                                        Total Value:
                                    </div>
                                    <div class="my-plunder-item-right">
                                        {{  }}
                                    </div>
                                </div>
								<div ng-if="!myPlunder || myPlunder.length < 1">
									You haven't plundered any Birthday Bounty yet!
								</div>
                            </div>
                        </div>
                        <div class="bounty-summary-items-container">
							<hr/>
							<div ng-if="filteredBountyData().length < 1" class="no-bounty-message">
								Could not find any Birthday Bounty! Try to adjust your filters using the Bounty Filters on the left.
							</div>
                            <div ng-if="!!filteredBountyData()" ng-repeat="bountyItem in filteredBountyData() track by $index">
                                <div class="bounty-summary-row">
                                    <div class="bounty-item-header">
                                        <div class="bounty-item-org-name">
                                            {{ bountyItem.organisation.name }}
                                        </div>
                                        <div class="standard-button toggle-plunder-button" ng-click="toggleInMyPlunder(bountyItem.bountyId)">
											{{ myPlunder.indexOf(bountyItem.bountyId) === -1 ? 'Add to My Bounty' : 'Remove from My Bounty' }}
										</div>
                                        <div class="bounty-item-org-social">
                                            <a ng-if="bountyItem.organisation.social.facebook" target="_blank" ng-href="{{bountyItem.organisation.social.facebook}}">
                                                <img class="social-button" src="images/facebook.svg" />
                                            </a>
                                            <a ng-if="bountyItem.organisation.social.twitter" target="_blank" ng-href="{{bountyItem.organisation.social.twitter}}">
                                                <img class="social-button" src="images/twitter.svg" />
                                            </a>
                                            <a ng-if="bountyItem.organisation.social.instagram" target="_blank" ng-href="{{bountyItem.organisation.social.instagram}}">
                                                <img class="social-button" src="images/instagram.svg" />
                                            </a>
                                        </div>
                                    </div>
									<div class="bounty-item-left-details">
										<h3>
											{{ bountyItem.title }}
										</h3>
                                        <h6>
											{{ bountyItem.additionalDetails }}
										</h6>
										<div>
											<b>{{ getBountyAvailabilityMessage(bountyItem) }}</b>
										</div>
									</div>
 									<div class="bounty-item-right-details">
										<h3>
											{{ bountyItem.maxValue | currency }}
										</h3>
                                        <div class="bounty-types" ng-repeat="typeId in bountyItem.types.slice().reverse() track by $index">
											<div ng-if="plunderOptions.includeTypes.indexOf(typeId) !== -1">
                                                <img class="bounty-type-icon" ng-src="{{getTypeById(typeId).iconPath}}"/>
											</div>
										</div>
 									</div>
                                    <div class="condition-list">
										<hr/>
                                        <div ng-if="bountyItem.conditions.registrationRequiredUrl" class="ng-scope">
                                            <img class="condition-icon" src="images/registrationurl.svg">
                                            <a target="_blank" ng-href="{{bountyItem.conditions.registrationRequiredUrl}}">Sign up here</a>
                                        </div>
                                        <div ng-if="bountyItem.conditions.identificationRequired" class="ng-scope">
                                            <img class="condition-icon" src="images/idrequired.svg">
                                            Provide ID to verify your date of birth
                                        </div>
                                        <div ng-if="bountyItem.conditions.digitalVoucherRequired" class="ng-scope">
                                            <img class="condition-icon" src="images/digitalvoucher.svg">
                                            Present a digital voucher on a phone or tablet
                                        </div>
                                        <div ng-if="bountyItem.conditions.paperVoucherRequired" class="ng-scope">
                                            <img class="condition-icon" src="images/papervoucher.svg">
                                            Print off and present a paper voucher
                                        </div>
                                        <div ng-if="bountyItem.conditions.notes && bountyItem.conditions.notes.length > 0">
                                            <b>Notes:</b>
                                            <div ng-repeat="note in bountyItem.conditions.notes track by $index">
                                                <div>{{ note }}</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="footer-strip">
                    <div class="footer-text">
                        <a href="" ng-click="clearBirthday()" ng-if="dob">
                            Click here to change your date of birth
                        </a>
                        <br />
                        <br />
                        <a href="http://www.lukehedin.com/">
                        	Created by Luke Hedin
                        </a>
                        <div>
                            Social icons designed by <a target="_blank" href="http://www.flaticon.com/authors/freepik">Freepik</a> of Flaticon
                        </div>
                        <div>
                            Bounty icons designed by <a target="_blank" href="http://www.flaticon.com/authors/madebyoliver">Madebyoliver</a> of Flaticon
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Modules -->
        <script src="scripts/app.js"></script>
        <!-- Controllers -->
        <script src="scripts/data/bounty.js"></script>
        <script src="scripts/controllers/MainController.js"></script>
    </body>
</html>